version: 2

sources:
  - name: CA_GOOGLE_ANALYTICS
    config:
      event_time: EVENT_DATE
    database: SNOWFLAKE_CONNECTOR_FOR_GOOGLE_ANALYTICS_DB
    schema: SNOWFLAKE_CONNECTOR_FOR_GOOGLE_ANALYTICS_SCHEMA
    tables:
      - name: ANALYTICS_314711183__VIEW
        description: "Statewide GA property view"
        freshness:
          warn_after:
            count: 3
            period: day
          error_after:
            count: 5
            period: day
          filter: datediff('day', event_date, current_timestamp) < 5
        loaded_at_field: "event_date"

      - name: ANALYTICS_322878501__VIEW
        description: "CA State Portal (https://www.ca.gov/) property view"
        freshness:
          warn_after:
            count: 3
            period: day
          error_after:
            count: 5
            period: day
          filter: datediff('day', event_date, current_timestamp) < 5
        loaded_at_field: "event_date"
      - name: ANALYTICS_471611234__VIEW
        description: "Gov Ops(engaged.ca.gov) GA property data"
        freshness:
          warn_after:
            count: 3
            period: day
          error_after:
            count: 5
            period: day
          filter: datediff('day', event_date, current_timestamp) < 5
        loaded_at_field: "event_date"
  - name: calinnovate_dynamodb
    database: "{{ env_var('DBT_RAW_DB', 'RAW_PRD') }}"
    schema: calinnovate_dynamodb
    tables:
      - name: BENEFITS_RECOMMENDATION_API_PRODUCTION_EVENTS_TABLE_PIGRTV_2_DYWTM
        description: "Custom benefits recommender widget data"
  - name: tiger_2022
    database: "{{ env_var('DBT_RAW_DB', 'RAW_PRD') }}"
    schema: tiger_2022
    tables:
      - name: PLACES
        description: >
          Census designated place information, cities. Limited to California only.
      - name: COUNTIES
        description: "Census county information. Limited to California only."
